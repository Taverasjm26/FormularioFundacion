@model Formulario.Models.SolicitudInput

@{
    ViewData["Title"] = "Fu";
}

<div style="text-align:center; margin-bottom: 15px;">
    <img src="~/images/logo.jpg"
         alt="Logo"
         style="
            width: 130px;
            height: 130px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
         ">
</div>

<h2 style="text-align:center; font-weight: bold;">Fundación Amira Al-Dahab</h2>


<h2 class="mb-3">Datos del cliente</h2>

<div class="text-danger">
    @Html.ValidationSummary()
</div>


<form asp-action="Crear" method="post" class="mt-3">
    @Html.AntiForgeryToken()

    <div class="mb-3">
        <label class="form-label fw-bold">Nombre</label>
        <input asp-for="Nombre" class="form-control" placeholder="Ej: Juan Pérez" />
        <span asp-validation-for="Nombre" class="text-danger"></span>
    </div>


    <div class="mb-3">
        <label class="form-label fw-bold">Número de celular</label>
        <input asp-for="Telefono" class="form-control" placeholder="Ej: +1 8290000000" />
        <span asp-validation-for="Telefono" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">País</label>
        <select asp-for="Pais" class="form-select">
            <option value="">-- Seleccione un país --</option>
            <option>República Dominicana</option>
            <option>Estados Unidos</option>
            <option>España</option>
            <option>México</option>
            <option>Colombia</option>
            <option>Venezuela</option>
            <option>Argentina</option>
            <option>Chile</option>
            <option>Perú</option>
            <option>Brasil</option>
            <option>Canadá</option>
        </select>
        <span asp-validation-for="Pais" class="text-danger"></span>
    </div>



    <div class="mb-3">
        <label class="form-label fw-bold">Dni/Cedula</label>
        <input asp-for="Cedula" class="form-control" placeholder="Ej: 001-0000000-0" />
        <span asp-validation-for="Cedula" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Cantidad (USD)</label>


        <input asp-for="Cantidad"
               type="number"
               step="0.01"
               class="form-control"
               id="cantidadUSD"
               placeholder="Ej: 20000" />


        <span asp-validation-for="Cantidad" class="text-danger"></span>

        <div id="totalBox" style="display:none; margin-top:8px; color:#333;">
            <strong>Total a pagar: </strong>
            <span id="totalValue"></span><br />
            <small style="color:#666;">
                Incluye impuesto estimado de <span id="taxValue"></span>
            </small>
        </div>

    </div>

        <small id="usdText" style="display:none; color:#555;">
            Equivalente en USD: <strong id="usdValue"></strong>
        </small>
    


    <div class="mb-3">
        <label class="form-label fw-bold">¿Qué hará con el dinero?</label>
        <textarea asp-for="Proposito" class="form-control" rows="3" placeholder="Ej: Compra de materiales, pago de servicio, etc."></textarea>
        <span asp-validation-for="Proposito" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Enviar</button>
</form>

<script>
    (function () {
        const inputUSD = document.getElementById("cantidadUSD");
        const totalBox = document.getElementById("totalBox");
        const totalValue = document.getElementById("totalValue");
        const taxValue = document.getElementById("taxValue");

        // EJEMPLO:
        // 20,000 USD → 150 USD de impuesto
        // 150 / 20,000 = 0.0075 (0.75%)
        const TAX_RATE = 0.0075;

        function formatUSD(value) {
            return "USD " + value.toLocaleString("en-US", {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        inputUSD.addEventListener("input", function () {
            const amount = parseFloat(this.value);

            if (isNaN(amount) || amount <= 0) {
                totalBox.style.display = "none";
                return;
            }

            const tax = amount * TAX_RATE;
            const total = amount + tax;

            taxValue.textContent = formatUSD(tax);
            totalValue.textContent = formatUSD(total);
            totalBox.style.display = "block";
        });
       
    (function () {
        const inputUSD = document.getElementById("cantidadUSD");

        // Al hacer focus (click o tap)
        inputUSD.addEventListener("focus", function () {
            // Selecciona todo el contenido
            this.select();
        });
    })();

    })();
</script>



@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
